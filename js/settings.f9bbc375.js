(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["settings"],{"145e":function(e,t,s){"use strict";s("931f")},"26d3":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"settings"},[s("Head",{attrs:{isSettings:""}}),s("div",{staticClass:"main"},[s("Basic",{attrs:{options:e.options}}),e.$user.permission.includes("ADMIN:1")?s("div",{staticClass:"divider"}):e._e(),e.$user.permission.includes("ADMIN:1")?s("UserManagement",{attrs:{options:e.options}}):e._e(),e.$user.permission.includes("ADMIN:1")?s("div",{staticClass:"divider"}):e._e(),e.$user.permission.includes("ADMIN:1")?s("RoleManagement",{attrs:{options:e.options}}):e._e(),s("div",{staticClass:"divider"}),s("ResetPassword")],1)],1)},i=[],o=s("7a0f"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"basic"},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$locale.settings.basic.title)+" ")]),s("div",{staticClass:"form"},[s("div",{staticClass:"form-item"},[s("label",{attrs:{for:"username"}},[e._v(" "+e._s(e.$locale.settings.basic.username)+" ")]),s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.options.username,expression:"options.username"}],attrs:{id:"username",type:"text",placeholder:e.$locale.settings.basic.usernamePlaceholder,autocomplete:"off"},domProps:{value:e.options.username},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.options,"username",t.target.value)}}}),e.options.username?s("div",{staticClass:"clean-input"},[s("i",{staticClass:"fas fa-times",on:{click:function(t){e.options.username=""}}})]):e._e()])]),e.$user.permission.includes("ADMIN:1")?s("div",{staticClass:"form-item"},[s("label",{attrs:{for:"userLimit"}},[e._v(" "+e._s(e.$locale.settings.basic.userLimit)+" ")]),s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.options.userLimit,expression:"options.userLimit"}],attrs:{id:"userLimit",type:"number",min:"1",step:"1"},domProps:{value:e.options.userLimit},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.options,"userLimit",t.target.value)}}})])]):e._e(),s("div",{staticClass:"form-item"},[s("button",{staticClass:"btn-submit",on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$locale.settings.basic.submit)+" ")])])])])},r=[],l={props:{options:{type:Object,default(){return{username:"",userLimit:1}}}},methods:{handleSubmit(){const e=this.options.username;this.$startLoading(),this.$http.post("/api/admin/basic",{id:this.$user.id,token:this.$user.token,userLimit:this.options.userLimit,username:e}).then(t=>{t.data.success?this.$setUser({name:e}):this.$showError(this.$locale.common.errorMsg),this.$stopLoading()}).catch(e=>{this.$showError(this.$locale.common.errorServer),this.$stopLoading()})}}},c=l,u=(s("93ed"),s("0c7c")),d=Object(u["a"])(c,n,r,!1,null,"958a50e8",null),p=d.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"role-management"},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$locale.settings.roleManagement.title)+" ")]),s("div",{staticClass:"form"},[s("div",{staticClass:"form-item"},[s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newRole.name,expression:"newRole.name"}],attrs:{type:"text",placeholder:e.$locale.settings.roleManagement.name},domProps:{value:e.newRole.name},on:{input:function(t){t.target.composing||e.$set(e.newRole,"name",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newRole.permission,expression:"newRole.permission"}],attrs:{type:"text",placeholder:e.$locale.settings.roleManagement.permission},domProps:{value:e.newRole.permission},on:{input:function(t){t.target.composing||e.$set(e.newRole,"permission",t.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.newRole.space,expression:"newRole.space"}],attrs:{type:"number",min:"0",step:"1",placeholder:e.$locale.settings.roleManagement.space},domProps:{value:e.newRole.space},on:{input:function(t){t.target.composing||e.$set(e.newRole,"space",t.target.value)}}}),s("div",{staticClass:"custom-select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:e.newRole.unit,expression:"newRole.unit"}],on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newRole,"unit",t.target.multiple?s:s[0])}}},e._l(["GB","MB","KB","B"],(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0),s("i",{staticClass:"fas fa-sort-down"})])]),s("div",{staticClass:"action"},[s("button",{staticClass:"btn-add",on:{click:e.handleAdd}},[s("i",{staticClass:"fas fa-plus"})])])]),s("div",{staticClass:"line"}),e._l(e.options.roles,(function(t){return s("div",{key:t.ID,staticClass:"form-item"},[s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.Name,expression:"role.Name"}],attrs:{type:"text"},domProps:{value:t.Name},on:{input:function(s){s.target.composing||e.$set(t,"Name",s.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Permission,expression:"role.Permission"}],attrs:{type:"text"},domProps:{value:t.Permission},on:{input:function(s){s.target.composing||e.$set(t,"Permission",s.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.convertedSpace,expression:"role.convertedSpace"}],attrs:{type:"number",min:"0",step:"1"},domProps:{value:t.convertedSpace},on:{input:function(s){s.target.composing||e.$set(t,"convertedSpace",s.target.value)}}}),s("div",{staticClass:"custom-select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.unit,expression:"role.unit"}],on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"unit",s.target.multiple?a:a[0])}}},e._l(["GB","MB","KB","B"],(function(t,a){return s("option",{key:a,domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0),s("i",{staticClass:"fas fa-sort-down"})])]),s("div",{staticClass:"action"},[s("button",{staticClass:"btn-update",on:{click:function(s){return e.handleSave(t)}}},[s("i",{staticClass:"fas fa-save"})])])])}))],2)])},h=[],v={props:{options:{type:Object,default(){return{roles:[]}}}},methods:{clearAdd(){this.newRole={name:"",permission:"",space:"",unit:"GB"}},handleAdd(){this.$startLoading(),this.$http.post("/api/admin/role/add",{id:this.$user.id,token:this.$user.token,name:this.newRole.name,permission:this.newRole.permission,space:this.$revertSpaceByUnit(this.newRole.space,this.newRole.unit)}).then(e=>{if(e.data.success){let t=e.data.data;t.roles.forEach(e=>{e.unit=this.$getUnitBySpace(e.Space),e.convertedSpace=this.$convertSpaceByUnit(e.Space,e.unit)}),this.options.roles=t.roles,this.clearAdd()}else this.$showError(this.$locale.common.errorMsg);this.$stopLoading()}).catch(e=>{this.$showError(this.$locale.common.errorServer),this.$stopLoading()})},handleSave(e){this.$startLoading(),this.$http.post("/api/admin/role/save",{id:this.$user.id,token:this.$user.token,roleId:e.ID,name:e.Name,permission:e.Permission,space:this.$revertSpaceByUnit(e.convertedSpace,e.unit)}).then(e=>{if(e.data.success){let t=e.data.data;t.roles.forEach(e=>{e.unit=this.$getUnitBySpace(e.Space),e.convertedSpace=this.$convertSpaceByUnit(e.Space,e.unit)}),this.options.roles=t.roles}else this.$showError(this.$locale.common.errorMsg);this.$stopLoading()}).catch(e=>{this.$showError(this.$locale.common.errorServer),this.$stopLoading()})}},data(){return{newRole:{name:"",permission:"",space:"",unit:"GB"}}}},f=v,w=(s("590e"),Object(u["a"])(f,m,h,!1,null,"5b63b640",null)),$=w.exports,g=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"reset-password"},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$locale.settings.resetPassword.title)+" ")]),s("div",{staticClass:"form"},[s("div",{staticClass:"form-item"},[s("label",{attrs:{for:"oldPassword"}},[e._v(" "+e._s(e.$locale.settings.resetPassword.oldPassword)+" ")]),s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.oldPassword,expression:"oldPassword"}],attrs:{id:"oldPassword",type:"password",placeholder:e.$locale.settings.resetPassword.oldPasswordPlaceholder},domProps:{value:e.oldPassword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)},input:function(t){t.target.composing||(e.oldPassword=t.target.value)}}}),e.oldPassword?s("div",{staticClass:"clean-input"},[s("i",{staticClass:"fas fa-times",on:{click:function(t){e.oldPassword=""}}})]):e._e()])]),s("div",{staticClass:"form-item"},[s("label",{attrs:{for:"newPassword"}},[e._v(" "+e._s(e.$locale.settings.resetPassword.newPassword)+" ")]),s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.newPassword,expression:"newPassword"}],attrs:{id:"newPassword",type:"password",placeholder:e.$locale.settings.resetPassword.newPasswordPlaceholder},domProps:{value:e.newPassword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)},input:function(t){t.target.composing||(e.newPassword=t.target.value)}}}),e.newPassword?s("div",{staticClass:"clean-input"},[s("i",{staticClass:"fas fa-times",on:{click:function(t){e.newPassword=""}}})]):e._e()])]),s("div",{staticClass:"form-item"},[s("label",{attrs:{for:"confirmNewPassword"}},[e._v(" "+e._s(e.$locale.settings.resetPassword.confirmNewPassword)+" ")]),s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmNewPassword,expression:"confirmNewPassword"}],attrs:{id:"confirmNewPassword",type:"password",placeholder:e.$locale.settings.resetPassword.confirmNewPasswordPlaceholder},domProps:{value:e.confirmNewPassword},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSubmit.apply(null,arguments)},input:function(t){t.target.composing||(e.confirmNewPassword=t.target.value)}}}),e.confirmNewPassword?s("div",{staticClass:"clean-input"},[s("i",{staticClass:"fas fa-times",on:{click:function(t){e.confirmNewPassword=""}}})]):e._e()])]),s("div",{staticClass:"form-item"},[s("button",{staticClass:"btn-submit",on:{click:e.handleSubmit}},[e._v(" "+e._s(e.$locale.settings.resetPassword.submit)+" ")])])])])},C=[],P={methods:{clearForm(){this.oldPassword="",this.newPassword="",this.confirmNewPassword=""},handleSubmit(){this.newPassword==this.confirmNewPassword?(this.$startLoading(),this.$http.post("/api/admin/resetPassword",{id:this.$user.id,token:this.$user.token,oldPassword:this.oldPassword,newPassword:this.newPassword}).then(e=>{e.data.success?this.clearForm():this.$showError(this.$locale.common.errorMsg),this.$stopLoading()}).catch(e=>{this.$showError(this.$locale.common.errorServer),this.$stopLoading()})):this.$showError(this.$locale.common.errorConfirmPassword)}},data(){return{oldPassword:"",newPassword:"",confirmNewPassword:""}}},_=P,b=(s("145e"),Object(u["a"])(_,g,C,!1,null,"0daa1346",null)),y=b.exports,S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"user-management"},[s("div",{staticClass:"title"},[e._v(" "+e._s(e.$locale.settings.userManagement.title)+" ")]),e._l(e.options.users,(function(t){return s("div",{key:t.ID,staticClass:"form-item"},[s("div",{staticClass:"custom-input"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.Account,expression:"user.Account"}],attrs:{type:"text",placeholder:e.$locale.settings.userManagement.account,disabled:""},domProps:{value:t.Account},on:{input:function(s){s.target.composing||e.$set(t,"Account",s.target.value)}}}),s("input",{directives:[{name:"model",rawName:"v-model",value:t.Password,expression:"user.Password"}],attrs:{type:"password",placeholder:e.$locale.settings.userManagement.password,autocomplete:"off"},domProps:{value:t.Password},on:{input:function(s){s.target.composing||e.$set(t,"Password",s.target.value)}}}),s("div",{staticClass:"custom-select"},[s("select",{directives:[{name:"model",rawName:"v-model",value:t.RoleID,expression:"user.RoleID"}],attrs:{placeholder:e.$locale.settings.userManagement.role},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"RoleID",s.target.multiple?a:a[0])}}},e._l(e.options.roles,(function(t){return s("option",{key:t.ID,domProps:{value:t.ID}},[e._v(" "+e._s(t.Name)+" ")])})),0),s("i",{staticClass:"fas fa-sort-down"})])]),s("div",{staticClass:"action"},[s("button",{staticClass:"btn-update",on:{click:function(s){return e.handleSave(t)}}},[s("i",{staticClass:"fas fa-save"})])])])}))],2)},k=[],L={props:{options:{type:Object,default(){return{users:[],roles:[]}}}},methods:{handleSave(e){this.$startLoading(),this.$http.post("/api/admin/user/save",{id:this.$user.id,token:this.$user.token,userId:e.ID,roleId:e.RoleID,password:e.Password}).then(e=>{if(e.data.success){let t=e.data.data;this.options.users=t.users}else this.$showError(this.$locale.common.errorMsg);this.$stopLoading()}).catch(e=>{this.$showError(this.$locale.common.errorServer),this.$stopLoading()})}}},N=L,x=(s("e00c"),Object(u["a"])(N,S,k,!1,null,"17c922f4",null)),B=x.exports,E={components:{Head:o["a"],Basic:p,RoleManagement:$,ResetPassword:y,UserManagement:B},data(){return{options:{}}},mounted(){this.$startLoading(),this.$http.post("/api/admin/settings",{id:this.$user.id,token:this.$user.token}).then(e=>{if(e.data.success){let t=e.data.data;t.roles.forEach(e=>{e.unit=this.$getUnitBySpace(e.Space),e.convertedSpace=this.$convertSpaceByUnit(e.Space,e.unit)}),this.options=t}else this.$router.push("/login");this.$stopLoading()}).catch(e=>{this.$router.push("/login"),this.$stopLoading()})}},R=E,M=(s("2d39"),Object(u["a"])(R,a,i,!1,null,"14c6ee84",null));t["default"]=M.exports},"2a94":function(e,t,s){"use strict";s("6957")},"2d39":function(e,t,s){"use strict";s("55f4")},3957:function(e,t,s){},"48e3":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-lang-swap",attrs:{title:e.$locale.common.btnLangTips},on:{click:e.$swapLang}},[s("span",{staticClass:"text"},[e._v(e._s(e.$locale.common.langTag))])])},i=[],o=(s("f566"),s("0c7c")),n={},r=Object(o["a"])(n,a,i,!1,null,"726851f1",null);t["a"]=r.exports},5040:function(e,t,s){},"55f4":function(e,t,s){},"590e":function(e,t,s){"use strict";s("d81f")},6957:function(e,t,s){},"7a0f":function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"head"},[s("div",{staticClass:"options"},[s("BtnLogout"),e.isSettings?s("BtnHome"):s("BtnSettings"),s("BtnLangSwap")],1),s("div",{staticClass:"user"},[s("div",{staticClass:"user-name",class:{empty:0===e.$user.name.length}},[e._v(" "+e._s(e.$user.name)+" ")]),s("div",{staticClass:"user-role",class:{empty:0===e.$user.role.length}},[e._v(" "+e._s(e.$user.role)+" ")]),s("div",{staticClass:"user-space",attrs:{title:e.userSpaceTitle}},[s("div",{staticClass:"used",style:{width:e.usedSpaceWidth}},[s("span",[e._v(" "+e._s(e.usedSpace)+" / "+e._s(e.allSpace)+" ")])])])])])},i=[],o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-logout",attrs:{title:e.$locale.common.btnLogout},on:{click:e.handleLogout}},[s("i",{staticClass:"fas fa-sign-out-alt"})])},n=[],r={methods:{handleLogout(){this.$startLoading(),this.$http.post("/api/logout",{id:this.$user.id,token:this.$user.token}).then(e=>{e.data.success&&this.$setUser({id:0}),this.$router.push("/login"),this.$stopLoading()}).catch(e=>{this.$router.push("/login"),this.$stopLoading()})}}},l=r,c=(s("2a94"),s("0c7c")),u=Object(c["a"])(l,o,n,!1,null,"00ff2e48",null),d=u.exports,p=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-home",attrs:{title:e.$locale.common.btnHomeTips},on:{click:e.handleClick}},[s("i",{staticClass:"fas fa-hdd"})])},m=[],h={methods:{handleClick(){this.$router.push("/")}}},v=h,f=(s("9490"),Object(c["a"])(v,p,m,!1,null,"048a067e",null)),w=f.exports,$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"btn-settings",attrs:{title:e.$locale.common.btnSettingsTips},on:{click:e.handleClick}},[s("i",{staticClass:"fas fa-cog"})])},g=[],C={methods:{handleClick(){this.$router.push("/settings")}}},P=C,_=(s("b8c2"),Object(c["a"])(P,$,g,!1,null,"3c022f22",null)),b=_.exports,y=s("48e3"),S={props:{isSettings:{type:Boolean,default(){return!1}}},components:{BtnLogout:d,BtnHome:w,BtnSettings:b,BtnLangSwap:y["a"]},computed:{userSpaceTitle(){return`${this.$locale.common.usedSpace}: ${this.usedSpace}\n${this.$locale.common.allSpace}: ${this.allSpace}`},usedSpaceWidth(){return Math.round(this.$user.usedSpace/this.$user.allSpace)+"%"},usedSpace(){return this.$convertSpace2String(this.$user.usedSpace)},allSpace(){return this.$convertSpace2String(this.$user.allSpace)}}},k=S,L=(s("7c67"),Object(c["a"])(k,a,i,!1,null,"dfcc4386",null));t["a"]=L.exports},"7c67":function(e,t,s){"use strict";s("8fac")},"8fac":function(e,t,s){},"931f":function(e,t,s){},"93ed":function(e,t,s){"use strict";s("eab0")},9490:function(e,t,s){"use strict";s("3957")},b506:function(e,t,s){},b8c2:function(e,t,s){"use strict";s("dd5f")},d81f:function(e,t,s){},dd5f:function(e,t,s){},e00c:function(e,t,s){"use strict";s("5040")},eab0:function(e,t,s){},f566:function(e,t,s){"use strict";s("b506")}}]);
//# sourceMappingURL=settings.f9bbc375.js.map
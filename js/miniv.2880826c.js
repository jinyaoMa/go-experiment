(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["miniv"],{"6a2c":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"mini"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.secret,expression:"secret"}],staticClass:"secret",attrs:{type:"password",autocomplete:"off",placeholder:"Â© 2021 jinyaoMa"},domProps:{value:e.secret},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleLoad.apply(null,arguments)},input:function(t){t.target.composing||(e.secret=t.target.value)}}}),s("div",{staticClass:"tab"},[s("div",{staticClass:"tab-item",on:{click:e.handleTab}},[s("i",{staticClass:"fas fa-images"})]),e._m(0)]),s("div",{staticClass:"list"},[null!=e.parentPath?s("div",{staticClass:"list-item"},[s("router-link",{staticClass:"list-item-link",attrs:{to:{query:{currentPath:e.parentPath}}}},[s("i",{staticClass:"fas fa-reply fa-fw"}),e._v(" "+e._s(e.$locale.home.back2Parent)+" ")])],1):e._e(),e._l(e.currentFiles,(function(t,i){return s("div",{key:t.ID,staticClass:"list-item"},["directory"===t.Type?s("router-link",{staticClass:"list-item-link",attrs:{to:{query:{currentPath:t.Path}}}},[s("i",{staticClass:"fas fa-folder fa-fw"}),e._v(" "+e._s(t.Name)+" ")]):s("div",{staticClass:"list-item-text",on:{click:function(s){return e.handlePlay(t,i)}}},[s("i",{staticClass:"fas fa-file fa-fw"}),e._v(" "+e._s(t.Name)+" ")])],1)}))],2),e.canPlay?s("div",{staticClass:"video-section"},[s("i",{staticClass:"fas fa-times video-close",on:{click:e.handleClose}}),s("video-player",{ref:"videoPlayer",attrs:{options:e.playerOptions},on:{ended:function(t){return e.onPlayerEnded(t)}}})],1):e._e()])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"tab-item active"},[s("i",{staticClass:"fas fa-video"})])}],a={methods:{onPlayerEnded(e){let t=this.currentSource+1;t>=this.currentFiles.length?this.currentSource=0:this.currentSource=t},handleClose(){this.canPlay=!1},handlePlay(e,t){this.currentSource=t,this.canPlay=!0},getVideoLink(e){return`${this.$http.defaults.baseURL}/api/secret/${e.Apath}?secret=${this.secret}`},isImage(e){return/^\.(jpg|jpeg|git|png|bmp|webp|tif|svg)$/i.test(e.Extension)},handleLoad(){this.$startLoading(),this.$http.get("/api/secret?secret="+this.secret).then(e=>{e.data.success&&(window.localStorage.setItem("sEcReTGo-EXpiRemENT55699",this.secret),this.$setFiles(e.data.data.files)),this.$stopLoading()}).catch(e=>{this.$stopLoading()})},handleTab(){this.$router.replace("minip")},getMime(e){switch(e){case".mp4":return"video/mp4";case".webm":return"video/webm";case".flv":return"flv";case".mkv":return"video/webm";case".mov":return"video/quicktime";case".swf":return"application/x-shockwave-flash";default:return""}}},computed:{playerOptions(){if(this.currentSource<0||this.currentSource>=this.currentFiles.length)return{};let e=this.currentFiles[this.currentSource],t=this.getVideoLink(e),s=this.getMime(e.Extension.toLowerCase());return{language:this.$locale.LANG,sources:[{type:s,src:t}]}},player(){return this.$refs.videoPlayer.player},parentPath(){let e=this.$route.query.currentPath;if("string"===typeof e&&e.length>0){let t=e.lastIndexOf("\\");return-1!==t?e.substr(0,t):""}return null},currentFiles(){return[...this.currentSortedFiles.filter(e=>"directory"===e.Type),...this.currentSortedFiles.filter(e=>"file"===e.Type)]},currentSortedFiles(){let e=this.$route.query.currentPath;if("string"===typeof e&&e.length>0){let t=e.match(/\\/g),s=t?t.length:0;return this.$files.filter(t=>{let i=t.Path.match(/\\/g),r=i?i.length:0;return!(!t.Path.startsWith(e)||r!==s+1)&&("directory"===t.Type||/^\.(wmv|mp4|3gp|mov|m4v|avi|mkv|flv)$/i.test(t.Extension))})}return this.$files.filter(e=>"."!==e.Path&&!e.Path.includes("\\")&&("directory"===e.Type||/^\.(wmv|mp4|3gp|mov|m4v|avi|mkv|flv)$/i.test(e.Extension)))}},data(){return{secret:"",canPlay:!1,currentSource:-1}},mounted(){this.secret=window.localStorage.getItem("sEcReTGo-EXpiRemENT55699")||"",""!=this.secret&&this.handleLoad()}},n=a,l=(s("6ebd"),s("0c7c")),c=Object(l["a"])(n,i,r,!1,null,"50bc6c7a",null);t["default"]=c.exports},"6ebd":function(e,t,s){"use strict";s("d9d1")},d9d1:function(e,t,s){}}]);
//# sourceMappingURL=miniv.2880826c.js.map